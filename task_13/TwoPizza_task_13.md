# Задача о назначениях. Венгерский алгоритм.
1. В условиях задачи для каждой команды указан полный двудольный граф, в котором каждое ребро имеет определенную стоимость. Вершины первой доли представляют задачи, вершины второй доли исполнителей. Стоимость ребра определяет затраты при выполнении соответствующей задачи соответствующим исполнителем.
2. Затраты неотрицательны и представлены в виде матрицы затрат, в которой на пересечении i-й строки и j-го столбца указаны затраты j-го исполнителя на выполнение i-го задания.
3. Необходимо назначить исполнителей на задачи таким образом, чтобы общая стоимость затрат была минимальной.
4. Для решения задачи требуется найти совершенное паросочетание с минимальной суммарной стоимостью в двудольном графе.

## Условия задачи для команд:
### TwoPizza Team:

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |  17   |  20   |  10   |   5   |   8   |
| **B** |  16   |   8   |  12   |  14   |   8   |
| **C** |  10   |   7   |   9   |  12   |  11   |
| **D** |  13   |  13   |  17   |  15   |   6   |
| **E** |  11   |  12   |  12   |  19   |  13   |

## Решение

Дана матрица затрат для задач A, B, C, D, E и исполнителей 1, 2, 3, 4, 5:

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |  17   |  20   |  10   |   5   |   8   |
| **B** |  16   |   8   |  12   |  14   |   8   |
| **C** |  10   |   7   |   9   |  12   |  11   |
| **D** |  13   |  13   |  17   |  15   |   6   |
| **E** |  11   |  12   |  12   |  19   |  13   |

1. Проведем редукцию матрицы затрат. Вычтем из каждой строки минимальное значение, представленное в этой строке.

|       | **1** | **2** | **3** | **4** | **5** | **min** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|:-------:|
| **A** |  12   |  15   |   5   |   0   |   3   |  	-5	   |
| **B** |   8   |   0   |   4   |   6   |   0   |  	-8	   |
| **C** |   3   |   0   |   2   |   5   |   4   |  	-7	   |
| **D** |   7   |   7   |  11   |   9   |   0   |  	-6	   |
| **E** |   0   |   1   |   1   |   8   |   2   |  	-11	  |

После чего вычтем из каждого столбца минимальное значение, представленное в этом столбце.

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |  12   |  15   |   4   |   0   |   3   |
| **B** |   8   |   0   |   3   |   6   |   0   |
| **C** |   3   |   0   |   1   |   5   |   4   |
| **D** |   7   |   7   |  10   |   9   |   0   |
| **E** |   0   |   1   |   0   |   8   |   2   |
|**min**|   0   |   0   |  -1   |   0   |   0   |

Получим редуцированную матрицу, где нули обозначают наименее затратные варианты назначений.

|       | **1** | **2** | **3** | **4** | **5** | 
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |  12   |  15   |   4   |   0   |   3   |
| **B** |   8   |   0   |   3   |   6   |   0   |
| **C** |   3   |   0   |   1   |   5   |   4   |
| **D** |   7   |   7   |  10   |   9   |   0   |
| **E** |   0   |   1   |   0   |   8   |   2   |

2. Построим двудольный граф, вынесем на него те ребра, для которых в редуцированной матрице указаны нули.

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A --- 4
    B --- 2
    B --- 5
    C --- 2
    D --- 5
    E --- 1
    E --- 3
```

Выберем произвольное паросочетание A --- 4, B --- 5, C --- 2, E--- 1 и попытаемся построить совершенное паросочетание с помощью чередующихся деревьев.

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A -.- 4
    B --- 2
    B -.- 5
    C -.- 2
    D --- 5
    E -.- 1
    E --- 3
```

Построить дерево из оставшейся непокрытой вершины D.
```mermaid
graph LR
    D(D - 0 фр.)  --> 5(5 - 1 фр.) -.-> B(B - 2 фр.) --> 2(2 - 3 фр.) -.-> C(C - 4 фр.)
```

Найденная цепь не является чередующейся, следовательно, нам необходимо провести диагональную редукцию.

Поскольку это дерево покрывает вершины A, B, C, E, 1, 2, 4 и 5, то множество X = {A, B, C, E}, а множество Y = {1, 2, 4, 5}.
Минимальный элемент в строках A, B, C, E и столбце 3 преобразованной матрице затрат равен единице.
Вычитая единицу из строк A, B, C, E и добавляя к столбцам 1, 2, 4, 5 получаем новую матрицу затрат.

|       | **1** | **2** | **3** | **4** | **5** | 
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |  12   |  15   |   3   |   0   |   3   |
| **B** |   8   |   0   |   2   |   6   |   0   |
| **C** |   3   |   0   |   0   |   5   |   4   |
| **D** |   8   |   8   |  10   |  10   |   0   |
| **E** |   0   |   0   |   0   |   8   |   2   |

3. Построим новый двудольный граф, вынесем на него те ребра, для которых в матрице указаны нули.

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A --- 4
    B --- 2
    B --- 5
    C --- 2
    С --- 3
    D --- 5
    E --- 1
    E --- 2
    E --- 3
```

Возьмем прежнее паросочетание A --- 4, B --- 5, C --- 2, E --- 1 и попытаемся построить совершенное паросочетание с помощью чередующихся деревьев.

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A -.- 4
    B --- 2
    B -.- 5
    C -.- 2
    С --- 3
    D --- 5
    E -.- 1
    E --- 2
    E --- 3
```

Построить дерево из оставшейся непокрытой вершины D.
```mermaid
graph LR
    D(D - 0 фр.)  ---> 5(5 - 1 фр.) -.-> B(B - 2 фр.) ---> 2(2 - 3 фр.) -.-> C(C - 4 фр.) ---> 3(3 - 5 фр.)
```

"Перекрасим" найденную цепь и проверим полученное паросочетание.

```mermaid
graph LR
    D -.-> 5 ---> B -.-> 2 ---> C -.-> 3
```

```mermaid
graph LR
    subgraph "Доля 1"
        A[A]
        B[B]
        C[C]
        D[D]
        E[E]
    end
    subgraph "Доля 2"
        1[1]
        2[2]
        3[3]
        4[4]
        5[5]
    end
    A -.- 4
    B -.- 2
    B --- 5
    C --- 2
    С -.- 3
    D -.- 5
    E -.- 1
    E --- 2
    E --- 3
```
Полученное расписание является совершенным. Выпишем полученные назначения и их стоимости из исходной матрицы:
- A4 - 5
- B2 - 8
- C3 - 9
- D5 - 6
- E1 - 11

Общая стоимость затрат = 5 + 8 + 9 + 6 + 11 = 39.

## Ответ
Минимальная стоимость затрат 39, при следующих назначениях:
- задача A, исполнитель 4,
- задача B, исполнитель 2,
- задача C, исполнитель 3,
- задача D, исполнитель 5.
- задача E, исполнитель 1.