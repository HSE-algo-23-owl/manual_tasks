# Задание №15
## Вариант 6:

Пропускная способность дуг сети и стоимость транспортировки указана в таблице.

| Дуги | sa | sc | ab | bd | ad | cb | ct | bt | dt |
|:--------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--😐
| Пропускная способность | 8 | 8 | 2 | 3 | 6 | 4 | 4 | 6 | 8 |
| Стоимость транспортировки | 1 | 1 | 1 | 1 | 2 | 2 | 5 | 3 | 1 |

### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

```mermaid
graph LR
s-->|8|a
s-->|8|с
a-->|2|b
b-->|3|d
a-->|6|d
c-->|4|b
c-->|4|t
b-->|6|t
d-->|8|t
```

### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> b -> d -> a -> s. Минимальный вес дуг на этом пути равен 3.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети. Повторим данную оперпцию и получим:

```mermaid
graph RL
t-.->|3|b
d-.->|1|a-.->|1|s
s-->|8|c-->|4|t
s-->|7|a-->|2|b-->|3|t
c-->|4|b-->|3|d-->|8|t
a-->|5|d
```
### 3. Продолжим поиск увеличивающего пути в остаточной сети

В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 15 является максимальным для данной сети.

```mermaid
graph LR
s-->|7,8|a
s-->|8,8|с
a-->|2,2|b
b-->|3,3|d
a-->|5,6|d
c-->|4,4|b
c-->|4,4|t
b-->|3,6|t
d-->|8,8|t
```

### 4. Рассчитаем стоимость полученного максимального потока.

| Дуги | sa | se | ab | bd | ad | cb | ct | bt | dt | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:------😐
| Пропускная способность p(e) | 8 | 8 | 2 | 3 | 6 | 4 | 4 | 6 | 8 | |
| Локальный поток f(e) | 7 | 8 | 2 | 3 | 5 | 4 | 4 | 3 | 8 | |
| Стоимость транспортировки единицы потока c(e) | 1 | 1 | 1 | 1 | 2 | 2 | 5 | 3 | 1 | |
| Суммарная стоимость f(e)*c(e) | 7 | 8 | 2 | 3 | 10 | 8 | 20 | 9 | 8 | **75** |

Стоимость полученного потока составляет 75.

### 5. Попробуем уменьшить стоимость потока для чего построим остаточную сеть.
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

```mermaid
graph LR
s-->|-1|a
s-->|-1|c
c-->|-5|t
a-->|-1|b
b-->|-1|d
b-->|-3|t
d-->|-1|t
a-->|-2|d
c-->|-2|b
a-.->|1|s
d-.->|2|a
t-.->|3|b
```

В остаточной сети найден ориентированный цикл отрицательной стоимости s -> c -> b -> d -> a -> s (- 1 - 2 -1 + 2 + 1 = -1).

Найдем минимальный вес ребра в указанном цикле, изображенном **в остаточной сети с указанием величины потока**.

Минимальный вес ребра в цикле 1 - это неиспользованный резерв ребра a -> d.

Удалим найденный цикл - уменьшим на 1 вес всех ребер, входящих в цикл.

```mermaid
graph LR
s-->|8|a
s-->|7|c
c-->|4|t
a-->|2|b
b-->|2|d
b-->|3|t
d-->|8|t
a-->|6|d
c-->|3|b
c-.->|1|s
b-.->|1|c
t-.->|3|b
d-.->|1|b
```

В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

### 6. Рассчитаем стоимость полученного максимального потока.

| Дуги | sa | se | ab | bd | ad | cb | ct | bt | dt | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:------😐
| Пропускная способность p(e) | 8 | 8 | 2 | 3 | 6 | 4 | 4 | 6 | 8 | |
| Локальный поток f(e) | 8 | 7 | 2 | 2 | 5 | 3 | 4 | 3 | 8 | |
| Стоимость транспортировки единицы потока c(e) | 1 | 1 | 1 | 1 | 2 | 2 | 5 | 3 | 1 | |
| Суммарная стоимость f(e)*c(e) | 7 | 8 | 2 | 2 | 12 | 6 | 20 | 9 | 8 | **74** |

Стоимость полученного потока составляет 74.

### Ответ:
Максимальный поток в сети равен 15, минимальная стоимость потока 74, она реализуется следующим локальными потоками:

```mermaid
graph LR
s-->|8,8|a
s-->|7,8|с
a-->|2,2|b
b-->|2,3|d
a-->|6,6|d
c-->|3,4|b
c-->|4,4|t
b-->|3,6|t
d-->|8,8|t
```
